<h1 align=center>fan_bot</h1>

fan_bot не потому, что по фану написан, а от сокращения Faneron - название мероприятия. Бот для сбора отзывов от посетителей мероприятия.

<h2>Использование</h2>

После нажатия ***start*** будет предложено ***Оставить отзыв***. В отзыв попадут ответы на заданые ботом вопросы. Отзыв можно оставит только один раз. Вслучае сбоя или невозможности отправить отзыв перезапустить бота командой ***/start*** - бот об этом напишет. После перезапуска нужно заново ответить на все вопросы. Изменение отправленных сообщений изменит текст только у вас в чате, сохранится изначальный вариант текста - проверяйте сообщение перед отправкой!

<h2>Стэк и логика</h2>

Написан бот на ```aiogram``` и его реализации ```FSM```, для выгрузки из БД в excel испоьзуется ```pandas```. СУБД это локальный ```SQLite``` так как серьезных нагрузок не предполагалось изначально.

<h3>Бот</h3>

После старта бота в БД создается запись с **telegram id** пользователя. Получив от пользователя ответы на нужные вопросы из ```dialogs.py``` пишем весь контекст в БД.

<h3>Выгрузка данных</h3>

Ежедневно в 00:30 Кроном запускается скрипт ```parser_db.py``` для выгрузки новых комментариев в Google doc
