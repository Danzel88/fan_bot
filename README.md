<h1 align=center>fan_bot</h1>

fan_bot не потому, что по фану написан, а от сокращения Faneron - название мероприятия. Бот для сбора отзывов от посетителей мероприятия.

<h2>Использование</h2>

После нажатия ***start*** будет предложено ***Пописаться на новости*** или ***Оставить отзыв***. В отзыв попадут ответы на заданые ботом вопросы и отправленные фото. Отзыв можно оставит только один раз. Ограничение по количествву фото есть - 30шт. Вслучае сбоя или невозможности отправить отзыв перезапустить бота командой ***/start*** - бот об этом напишет. После перезапуска нужно заново ответить на все вопросы. Изменение отправленных сообщений изменит текст только у вас в чате, сохранится изначальный вариант текста - проверяйте сообщение перед отправкой!

<h2>Стэк и логика</h2>

Написан бот на ```aiogram``` и его реализации ```FSM```, для выгрузки из БД в excel испоьзуется ```pandas```. СУБД это локальный ```SQLite``` так как серьезных нагрузок не предполагалось изначально.

<h3>Бот</h3>

После старта бота в БД создается запись с **telegram id** пользователя. После выбора одного вариантов: ***Пописаться на новости*** или ***Оставить отзыв*** в таблицу дописывается соответсвующий статус. Получив от пользователя ответы на нужные вопросы из ```dialogs.py``` пишем весь контекст в БД.

<h3>Выгрузка данных</h3>

Для аналики требовалось ежедневно выгружать собранные данные. Для этого нужно запустить ```parser_db.py```. В ```dst_path``` из этого фйла будет скопирована БД из которой ```pandas``` выгрузит все данные в excel файл. 
